# ูุญููู ุงุณุชูุงุฏู

<div dir="rtl" markdown="1">

[๐ฌ๐ง English](../en/usage.md){ .language-switcher }


ุฏุฑ ุงู ุจุฎุด ุชุฑฺฉุจโูุง ูพุฑฺฉุงุฑุจุฑุฏ ุฏุณุชูุฑ ู ุฌุฑุงูโูุง ฺฉุงุฑ ุฑูุฒูุฑู ุฑุง ูโุจูุฏ. ุจุฑุง ูุดุงูุฏูู ุฎุฑูุฌ ฺฉุงูู ฺฉ ูุงฺูู ูุงูุนุ ุตูุญูู [ุขูุงุชูู ูุงฺูู Product](module-anatomy.md) ุฑุง ุจุจูุฏ.

## ููุง ฺฉู ุฏุณุชูุฑ

```bash
php artisan make:module {Name}
  {--api}
  {--requests}
  {--actions}
  {--dto}
  {--resource}
  {--tests}
  {--policy}
  {--force}
  {--swagger}
  {--no-swagger}
  {--fields=}
  {--from-migration=}
```

ุจุฑุง ูุดุงูุฏูู ุชูุถุญุงุช ฺฉุงูู ููฺฏโูุง `php artisan make:module --help` ุฑุง ุงุฌุฑุง ฺฉูุฏ.

### ูุนุงูโุณุงุฒ ูุณุชูุฏุงุช Swagger

ููฺฏโูุง `--api` ู `--swagger` ุฑุง ฺฉูุงุฑ ูู ุจู ฺฉุงุฑ ุจุจุฑุฏ ุชุง ุจุฑุง ูุฑ ุงฺฉุดู CRUD ุฏุงฺฉูููุช OpenAPI (`@OA`) ุจุณุงุฒุฏ. ุฎุฑูุฌ ุฏุฑ ูุงูุจ ฺฉูุงุณ `App\Docs\{Module}Doc` (ุจูโุทูุฑ ูพุดโูุฑุถ ุฏุฑ ูุณุฑ `app/Docs`ุ ูุงุจูโุชุบุฑ ุจุง `paths.docs`) ุงุฌุงุฏ ูโุดูุฏ ุชุง ฺฉูุชุฑูุฑ ุชูุฒ ุจูุงูุฏ ู ุงฺฏุฑ ุจุณุชูู Swagger ูุตุจ ูุจุงุดุฏ ฺฉ ูุดุฏุงุฑ ุฏุฑุงูุช ูโฺฉูุฏ ู ุนููุงุช ุจุฏูู ุฎุทุง ุงุฏุงูู ูโุงุจุฏ. ูพุด ุงุฒ ุงุณุชูุงุฏูุ ฺฉ ุงุฒ ุจุณุชูโูุง `darkaonline/l5-swagger` ุง `zircote/swagger-php` ุฑุง ูุตุจ ฺฉูุฏ.

## ุณุงุฎุช ูุงฺูู REST

```bash
php artisan make:module Invoice \
  --api --actions --dto --resource --requests --tests \
  --fields="number:string:unique, issued_at:date, total:decimal(12,2)"
```

ุฎุฑูุฌ ุงู ุฏุณุชูุฑ:

- ฺฉูุชุฑูุฑ API ุจุง ุงฺฉุดูโูุง ฺฉุงูู CRUD.
- ูุงูู ุงฺฉุดู ฺฉู ูุฑ ููุฑุฏ ุงุณุชูุงุฏู (List/Show/Create/Update/Delete) ุฑุง ุฏุฑ ฺฉูุงุณโูุง ูุฌุฒุง ุงุฌุฑุง ูโฺฉูุฏ ู ุฏุฑ ุตูุฑุช ุฎุทุงุ ุงุทูุงุนุงุช ฺฉุงูู exception ุฑุง ุฏุฑ ูุงฺฏ ุซุจุช ูโฺฉูุฏ.
- ูุฑูโุฑฺฉูุฆุณุชโูุง ฺฉู ุจุฑ ุงุณุงุณ ุงุณฺฉูุง ุชุนุฑูโุดุฏู ุงุนุชุจุงุฑุณูุฌ ูโฺฉููุฏ.
- ฺฉูุงุณโูุง DTO ู ุฑุณูุฑุณ ุจุง ูุชุงุฏุชุง ูุดุชุฑฺฉ.
- ุชุณุช ูฺุฑ ุจุฑุง ุณูุงุฑููุง ูููู ู ุดฺฉุณุช ุงุนุชุจุงุฑุณูุฌ.
- ูุฑูโุฑฺฉูุฆุณุชโูุง ุฏุฑ ูุณุฑ `App\Http\Requests\Invoice\` ุณุงุฎุชู ูโุดููุฏ ุชุง ุณุงุฎุชุงุฑ ูพุฑูฺูโูุง ุจุฒุฑฺฏ ูุฑุชุจ ุจูุงูุฏ.

```php
public function show(Invoice $invoice): mixed
{
    $model = ($this->showAction)($invoice->getKey());
    if (!$model) {
        return ApiResponseHelper::errorResponse('not found', 404);
    }

    $model->load(['customer', 'lines']);

    return ApiResponseHelper::successResponse(new InvoiceResource($model), 'success');
}
```

> ุฏุฑ ุตูุฑุช ุชูุงู ูโุชูุงูุฏ ุจุง ููฺฏ `--no-actions` ุงู ูุงู ุฑุง ุญุฐู ฺฉูุฏ ู ฺฉูุชุฑูุฑ ูุณุชููุงู ุณุฑูุณ ุฑุง ุตุฏุง ุจุฒูุฏ.

## ุงุณุชูุงุฏู ุงุฒ ูุงฺฏุฑุดู ุจูโุนููุงู ููุจุน ุงุตู

```bash
php artisan make:module Invoice \
  --api --requests --tests \
  --from-migration=database/migrations/2024_05_01_000001_create_invoices_table.php
```

ุจุง ุงุดุงุฑู ุจู ูุณุฑ ูุงฺฏุฑุดูุ ฺูุฑุงุชูุฑ ุงููุงุน ุณุชููุ ููุงุฏุฑ ูพุดโูุฑุถุ nullableุ ฺฉูุฏูุง ุฎุงุฑุฌ ู ุชูุถุญุงุช ุฑุง ุงุณุชุฎุฑุงุฌ ฺฉุฑุฏู ู ุฏุฑ DTOุ ุฑุณูุฑุณ ู ููุงูู ุงุนุชุจุงุฑุณูุฌ ุงุณุชูุงุฏู ูโฺฉูุฏ.

## ูุงฺููโูุง ุตุฑูุงู DTO

ุงฺฏุฑ ููุท ุจู ุณุงุฎุชุงุฑ ุฏุงุฏู ูุงุฒ ุฏุงุฑุฏุ ููฺฏ API ุฑุง ุญุฐู ู ุฑุณูุฑุณ/ุชุณุช ุฑุง ุบุฑูุนุงู ฺฉูุฏ.

```bash
php artisan make:module Money --dto --fields="amount:decimal(8,2), currency:string:3"
```

ุงู ุฏุณุชูุฑ ฺฉูุงุณ DTO ู ฺฉุงุฑุฎุงููู ูุฑุจูุท ุฑุง ุชููุฏ ูโฺฉูุฏ ุชุง ุฏุฑ ุณุงุฑ ุณุฑูุณโูุง ุงุณุชูุงุฏู ุดูุฏ.

## ุชููุฏ ุฏูุจุงุฑู ูพุณ ุงุฒ ุชุบุฑุงุช

ูุงูุจโูุง ูุงุจู ุดุฎุตโุณุงุฒ ูุณุชูุฏุ ุจูุงุจุฑุงู ููฺฏุงู ุงูุฒูุฏู ููุฏ ุฌุฏุฏ ูโุชูุงูุฏ ุจุง ููฺฏ `--force` ุฏุณุชูุฑ ุฑุง ุฏูุจุงุฑู ุงุฌุฑุง ฺฉูุฏ. ฺูุฑุงุชูุฑ ูุงูโูุง ููุฌูุฏ ุฑุง ููุท ุฏุฑ ุตูุฑุช ูุงุฒ ุจุงุฒููุณ ูโฺฉูุฏ.

```bash
php artisan make:module Invoice --fields="number:string, total:decimal(12,2), due_at:date" --force
```

ุงฺฏุฑ ูุงูโูุง ุฑุง ุจูโุตูุฑุช ุฏุณุช ูุฑุงุด ฺฉุฑุฏูโุงุฏ ูุจู ุงุฒ ฺฉุงูุช ุฎุฑูุฌ `git diff` ุฑุง ุจุฑุฑุณ ฺฉูุฏ.

## ุชุณุช

ุชุณุชโูุง ุชููุฏุดุฏู ุงุฒ ุชูุธูุงุช ูพุงฺฏุงูโุฏุงุฏู ุฏุฑ `.env` ุงุณุชูุงุฏู ูโฺฉููุฏ. ุจุฑุง ุงุทููุงู ุงุฒ ุณูุงูุช ูุงฺูู ุขูโูุง ุฑุง ูุญู ุงุฌุฑุง ฺฉูุฏ.

```bash
phpunit --testsuite=Feature
```

ุจุฑุง ุงุฏฺฏุฑ ุดุฎุตโุณุงุฒ ูพุดุฑูุชู ุจู [ุฑุงูููุง ูพุดุฑูุชู](advanced.md) ูุฑุงุฌุนู ฺฉูุฏ.


</div>
