# راهنمای مرجع CLI و فایل‌ها

<div dir="rtl" markdown="1">

[🇬🇧 English](../en/reference.md){ .language-switcher }


هر زمان به نمای کلی گزینه‌ها و خروجی‌ها نیاز داشتید از این راهنما استفاده کنید.

## گزینه‌های دستور

| گزینه | توضیح |
| --- | --- |
| `--api` | کنترلر API همراه با مسیرهای REST تولید می‌کند. |
| `--requests` | فرم‌ریکوئست برای اکشن‌های ذخیره و بروزرسانی بر اساس اسکیما می‌سازد. |
| `--dto` | کلاس DTO مطابق فیلدهای تعریف‌شده ایجاد می‌کند. |
| `--resource` | ریسورس لاراول برای فرمت یکدست پاسخ‌ها تولید می‌کند. |
| `--tests` | مجموعه تست فیچری برای سناریوهای CRUD می‌سازد. |
| `--policy` | کلاس پالیسی ایجاد و در سرویس‌پرووایدر ثبت می‌کند. |
| `--fields=` | اسکیما را به‌صورت درون‌خطی با الگوی `name:type:modifier` دریافت می‌کند. |
| `--from-migration=` | مسیر مایگریشن را گرفته و از متادیتای ستون‌ها استفاده می‌کند. |
| `--force` | بدون تایید فایل‌های موجود را بازنویسی می‌کند. |

می‌توانید فلگ‌ها را ترکیب کنید. استفاده هم‌زمان از اسکیما درون‌خطی و مایگریشن باعث می‌شود داده‌های استخراج‌شده ادغام شوند.

## ساختار خروجی

یک ماژول معمولی با فلگ‌های `--api --requests --dto --resource --tests` ساختاری مشابه زیر دارد:

```
app/Modules/{Module}/
├── Contracts/
├── DTOs/
├── Http/
│   ├── Controllers/
│   └── Requests/
├── Providers/
├── Repositories/
├── Resources/
└── Services/
```

در صورت فعال بودن تست‌ها، مسیر `tests/Feature/Modules/{Module}` نیز ایجاد می‌شود و سرویس‌پرووایدر در فایل مناسب ثبت خواهد شد.

## API کلاس‌های پایه

| کلاس | متد | توضیح |
| --- | --- | --- |
| `BaseRepository` | `find($id)` | جست‌وجوی رکورد بر اساس کلید اصلی. |
|  | `findDynamic($where, $with, ...)` | با دریافت آرایه‌هایی از شرط‌ها (`where`، `orWhere`، `whereBetween`، `whereNull`، `whereRaw` و …) کوئری را می‌سازد و اولین نتیجه را برمی‌گرداند. |
|  | `getByDynamic(...)` | همان امضای `findDynamic` را دارد اما مجموعه‌ای از نتایج را به صورت `Illuminate\Support\Collection` برمی‌گرداند. |
| `BaseService` | `index()` / `show()` / `store()` / `update()` / `destroy()` | متدهای کمکی که با ریپازیتوری ارتباط برقرار کرده و DTO را به آرایه تبدیل می‌کنند. |
|  | `findDynamic()` / `getByDynamic()` | همان متدها را در لایهٔ سرویس در دسترس قرار می‌دهد تا کنترلرها و کلاس‌های دیگر نیازی به کار مستقیم با Eloquent نداشته باشند. |

در صورت انتشار و ویرایش کلاس‌های پایه، ژنراتور به طور خودکار نسخهٔ سفارشی‌شدهٔ شما را توسعه خواهد داد.

## راهنمای سریع اسکیما

| مثال | مفهوم |
| --- | --- |
| `name:string:unique` | ستون رشته‌ای اجباری با قید یکتا. |
| `price:decimal(10,2):nullable` | ستون اعشاری با دقت و مقیاس مشخص که می‌تواند تهی باشد. |
| `user_id:foreignId:constrained(users)` | کلید خارجی به جدول `users`. |
| `metadata:json:nullable` | ستون JSON اختیاری. |

## رفع اشکال

- **قوانین اعتبارسنجی درست نیستند** – تعریف فیلدها را بازبینی کنید؛ مودیفایرهایی مثل `nullable` و `unique` مستقیم به قوانین تبدیل می‌شوند.
- **سرویس‌پرووایدر ثبت نشده** – مطمئن شوید فایل `bootstrap/providers.php` (لاراول ۱۱) یا `config/app.php` (لاراول ۱۰) در دسترس و قابل نوشتن است.
- **تست‌ها اجرا نمی‌شوند** – اعتبار تنظیمات پایگاه‌داده در `.env` را بررسی کنید و بانک اطلاعاتی مخصوص تست داشته باشید.

در صورت نیاز دستور را با فلگ `--verbose` اجرا کنید تا خروجی کامل را ببینید.

</div>
